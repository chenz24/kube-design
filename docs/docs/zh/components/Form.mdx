---
group: 'components'
category: 'state'
title: Form
description: '表单'
order: 1
---

## 基础用法

表单控件，用于创建一个实体或收集信息，需要对输入的数据类型进行校验时。

基本的表单数据域控制展示，包含布局、初始化、验证、提交。

```js live=true
() => {
   const onFinish = (values) => {
    console.log('success', values);
  };

  const onFinishFailed = (errorInfo) => {
    console.log('Failed', errorInfo)
  }

  return (
    <Form
      labelCol={{ span: 4 }}
      wrapperCol={{ span: 20 }}
      initialValues={{ remember: true }}
      onFinish={onFinish}
      onFinishFailed={onFinishFailed}
      autoComplete="off"
      layout="horizontal"
    >
      <FormItem
        name="account"
        label="Account"
        help="please enter your account"
        rules={[{ required: true, message: 'Please input your account!' }]}
        tooltip="please enter your account">
        <Input />
      </FormItem>
      <FormItem
        name="password"
        label="Password"
        help="Password"
        tooltip="please enter your password"
        rules={[{ required: true, message: 'Please input your name!' }]}
      >
         <InputPassword placeholder="Password"/>
      </FormItem>
      <FormItem wrapperCol={{ offset: 8, span: 16 }}>
        <Button color="primary" htmlType="submit">
           Submit
        </Button>
      </FormItem>
    </Form>
  )
}
```

## 表单布局

From 组件通过 layout 属性来布局，可选值为 水平排列（vertical） / 垂直排列（horizontal） / 行内排列（inline）。

Form 组件与 FormItem 搭配使用：

- Form 组件通过 labelAlign 属性可以控制 label 的排列对齐方式。
- Form 组件通过 size 属性可以控制表格的尺寸。
- Form 组件通过 initialValue 可以设定表格的初始值。
- Form 组件通过 labelCol 和 wrapperCol 设定表格占据的宽度。
- FromItem 组件通过 rules 可以设定表单的校验规则。

```js live=true
() => {
  const [form] = useForm();
  const [formLayout, setFormLayout] = React.useState('horizontal');
  const onRadioChange = (val) => {
    setFormLayout(val);
  };
  const getFieldData = () => {
    console.log(form.validateFields());
  };

  const onFinish = (values) => {
    console.log('success', values);
  };

  const onChange = (val) => {
    console.log('val', val)
  }

  const onFinishFailed = (errorInfo) => {
    console.log('Failed', errorInfo)
  }

  const layoutCol = {
     labelCol: { span: 4 },
     wrapperCol: { span: 20 },
   };

  return (
    <>
      <RadioGroup onChange={onRadioChange} defaultValue={formLayout}>
        <Radio label="horizontal" value="horizontal" />
        <Radio label="vertical" value="vertical" />
        <Radio label="inline" value="inline" />
      </RadioGroup>
      <Form
        {...layoutCol}
        layout={formLayout}
        form={form}
        size="lg"
        labelAlign="right"
        initialValues={{ account: 'wayne' }}
        onFinish={onFinish}
        onFinishFailed={onFinishFailed}
      >
        <FormItem
          name="account"
          label="Account"
          help="please enter your account"
          rules={[{ required: true, message: 'Please input your account!' }]}
          tooltip="please enter your account">
        <Input />
        </FormItem>
        <FormItem
          name="password"
          label="Password"
          help="Password"
          tooltip="please enter your password"
          rules={[{ required: true, message: 'Please input your name!' }]}
        >
          <InputPassword placeholder="Password"/>
        </FormItem>
        <FormItem>
          <Button onClick={getFieldData} size="xs">
             Submit
          </Button>
        </FormItem>
      </Form>
    </>
  );
};
```

## 表单尺寸

```ts live=true
() => {
  const [componentSize, setComponentSize] = React.useState('xs');
  const onFormSizeChange = (size) => {
     console.log('size', size);
     setComponentSize(size);
  };
  const [form] = useForm();
  return (
    <>
      <RadioGroup onChange={onFormSizeChange} defaultValue={componentSize}>
        <Radio value="xs" label="xs" />
        <Radio value="sm" label="sm" />
        <Radio value="md" label="md" />
        <Radio value="lg" label="lg" />
        <Radio value="xl" label="xl" />
      </RadioGroup>
      <Form layout="horizontal" size={componentSize} form={form}>
        <FormItem label="Input">
          <Input placeholder="please input some text..." />
        </FormItem>
        <FormItem label="InputNumber">
          <InputNumber />
        </FormItem>
        <FormItem label="button">
          <Button color="primary" variant="filled" radius="xl">
            按钮
          </Button>
        </FormItem>
      </Form>
    </>
  );
}
```

## 动态增减嵌套字段

嵌套表单字段需要对 field 进行拓展，将 field.name 应用于控制字段。

```js live=true
() => {
  const [form] = useForm();
  const getFieldErrors = () => {
    console.log(form.validateFields());
  };
  const onFinish = (values) => {
    console.log(values);
  };
  const { Add, Trash } = KubeIcon;
  return (
    <Form onFinish={onFinish} form={form}>
      <FormList name="users">
        {(fields, { add, remove }) => (
          <>
            {fields.map(({ key, name, ...restField }) => (
              <Row gutter={[10, 40]} key={key}>
                <Col span={5}>
                  <FormItem
                    {...restField}
                    name={[name, 'first']}
                    label="Fist Name"
                    help="user name must input"
                    rules={[{ required: true, message: 'Please input your username!' }]}
                  >
                    <Input />
                  </FormItem>
                </Col>
                <Col span={5}>
                  <FormItem
                    {...restField}
                    name={[name, 'last']}
                    label="Last Name"
                    help="help content"
                    rules={[{ required: true, message: 'Please input your uid!' }]}
                  >
                    <Input />
                  </FormItem>
                </Col>
                <Col span={1}>
                  <Button variant="text" onClick={() => remove(name)} leftIcon={<Trash size={16} />}>
                    增加
                  </Button>
                </Col>
              </Row>
            ))}
            <Row>
              <Col span={12}>
                <Button onClick={() => add()}>
                  <Add size={16} />
                </Button>
              </Col>
            </Row>
          </>
        )}
      </FormList>
      <Button type="button" onClick={getFieldErrors}>
        Submit
      </Button>
    </Form>
  );
}
```
