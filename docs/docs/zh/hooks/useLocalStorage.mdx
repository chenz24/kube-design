---
group: 'hooks'
category: 'state'
title: useLocalStorage
description: '使用 localStorage 值作为反应状态，通过打开的选项卡同步状态'
order: 1
---

## 使用方法

useLocalStorage 允许您使用 localStorage 中的值作为反应状态。 Hook 的工作方式与 useState 完全相同，但也会将值写入本地存储。

```js
const [value, setValue] = useLocalStorage({ key: 'color-type', defaultValue: 'primary' });

setValue('primary');

setValue((current) => (current === 'primary' ? 'secondary' : 'primary'));
```

## 示例

```js live=true
() => {
  const [colorType, setColorType] = useLocalStorage({
    key: 'color-type',
    defaultValue: 'primary'
  })

  const toggleColorChange = () =>
    setColorType((current) => ( current === 'primary' ? 'success' : 'primary'))

  return (
     <Button
       onClick={toggleColorChange}
       variant="filled"
       color={colorType === 'primary'? 'primary': 'secondary'}
     >
        { colorType === 'primary'? 'primary' : 'secondary'}
     </Button>
  )
}
```

## 浏览器标签同步

useLocalStorage 订阅存储事件。当一个选项卡中的状态发生变化时，它会自动更新所有其他打开的浏览器选项卡中的值。

## 定义

```ts
function useLocalStorageValue<T extends string>(options: {
  key: string;
  defaultValue?: T;
}): [T, (val: T | ((prevState: T) => T)) => void];
```

## 设置值类型

您可以指定与 useState 钩子中相同的值类型，类型必须扩展字符串。

```ts
type ColorType = 'primary' | 'secondary';

const [value, setValue] = useLocalstorage<ColorType>({
  key: 'color-type',
  defaultValue: 'primary',
})
```
